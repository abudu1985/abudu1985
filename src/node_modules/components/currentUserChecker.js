import {useEffect, useContext} from 'react'
import {CurrentUserContext} from 'contexts/currentUser'
import firebase from "../../firebase";

const CurrentUserChecker = ({children}) => {
  const [, dispatch] = useContext(CurrentUserContext)

  useEffect(() => {
    (async () => {
      const a = await firebase.isInitialized();

      if (!a) {
        dispatch({type: 'SET_UNAUTHORIZED'})
      } else {
        dispatch({type: 'SET_AUTHORIZED', payload: a})
      }
    })();
  }, [dispatch]);

  return children
}

export default CurrentUserChecker
