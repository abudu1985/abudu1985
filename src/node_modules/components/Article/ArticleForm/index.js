import React, {useEffect, useState} from 'react'
import Editor from 'components/editor'
import 'components/Article/CreateArticle/style.css'
import RoundButton from 'components/RoundButton';
import Input from '../../Input';

const ArticleForm = ({onSubmit, initialValues}) => {
    const [title, setTitle] = useState('')
    const [description, setDescription] = useState('')
    const [body, setBody] = useState('')
    const [tagList, setTagList] = useState('')

    const handleSubmit = event => {
        event.preventDefault()

        const article = {
            title,
            description,
            body,
            tagList: tagList.split(' ')
        }

        onSubmit(article)
    }

    useEffect(() => {
        if (!initialValues) {
            return
        }

        setTitle(initialValues.title)
        setDescription(initialValues.description)
        setBody(initialValues.body)
        setTagList(initialValues.tagList)
    }, [initialValues])

    const bodyChange = (val) => {
        console.log(val);
        setBody(val);
    }

    return (
        <div className=''>
            <RoundButton
                type='submit'
                disabled={false}//{this.props.user.fetching || this.props.user.processing}
                innerHtml="Save"
                color={'green'}
                onClick={handleSubmit}
            />
            <div className="">
                <Input
                    type="text"
                    className=""
                    placeholder="Article title"
                    value={title}
                    onChange={e => setTitle(e.target.value)}
                />
            </div>
            <div className="">
                <Input
                    type="text"
                    className=""
                    placeholder="What is this article about?"
                    value={description}
                    onChange={e => setDescription(e.target.value)}
                />
            </div>
            <div className="">
                <Input
                    type="text"
                    className="form-control form-control-lg"
                    placeholder="Enter tags"
                    value={tagList}
                    onChange={e => setTagList(e.target.value)}
                />
            </div>
            <Editor placeholder={'Write something...'} value={body} onChange={bodyChange}/>
        </div>
    )
};
export default ArticleForm;